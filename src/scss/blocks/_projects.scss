@use '../utils/utils' as *;

.projects {
    padding: $spacing-4xl 0;
    background-color: $color-off-white;
    position: relative;
    
    &::before {
        content: '';
        position: absolute;
        top: -50px;
        left: 0;
        right: 0;
        height: 100px;
        background: linear-gradient(180deg, transparent, $color-off-white);
        pointer-events: none;
    }
    
    &__container {
        @include container;
    }
    
    &__title {
        text-align: center;
        margin-bottom: $spacing-3xl;
        position: relative;
        animation: fade-in 1s $transition-timing;
        
        &::after {
            content: '';
            position: absolute;
            bottom: -$spacing-md;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background-color: $color-primary;
            border-radius: $radius-full;
        }
    }
    
    &__grid {
        @include grid(1, $spacing-lg);
        margin-bottom: $spacing-3xl;
        
        @include media-md {
            @include grid(2, $spacing-xl);
        }
        
        @include media-lg {
            @include grid(3, $spacing-xl);
        }
    }
    
    &__action {
        text-align: center;
        animation: fade-in 1s $transition-timing 0.3s both;
    }
}

.project-card {
    @include card;
    display: flex;
    flex-direction: column;
    height: 100%;
    cursor: pointer;
    animation: fade-in-up 0.8s $transition-timing;
    animation-fill-mode: both;
    position: relative;
    
    @for $i from 1 through 3 {
        &:nth-child(#{$i}) {
            animation-delay: #{$i * 0.1}s;
        }
    }
    
    &__link {
        display: flex;
        flex-direction: column;
        height: 100%;
        text-decoration: none;
        color: inherit;
        
        &:focus-visible {
            outline: none;
        }
    }
    
    &__image-wrapper {
        @include aspect-ratio(16, 10);
        overflow: hidden;
        background-color: $color-gray-lighter;
        
        &::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, transparent 60%, rgba($color-dark, 0.1));
            opacity: 0;
            @include transition(opacity);
        }
    }
    
    &__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        @include transition(transform, $transition-slow);
    }
    
    &__content {
        padding: $spacing-lg;
        flex: 1;
        display: flex;
        flex-direction: column;
    }
    
    &__title {
        font-size: $font-size-xl;
        margin-bottom: $spacing-sm;
        color: $color-dark;
        @include transition(color);
    }
    
    &__description {
        font-size: $font-size-base;
        line-height: $line-height-relaxed;
        color: $color-gray;
        flex: 1;
        margin-bottom: $spacing-md;
    }
    
    &__tech {
        font-size: $font-size-sm;
        color: $color-primary;
        font-weight: $font-weight-semibold;
        display: inline-block;
        padding: $spacing-xs $spacing-sm;
        background-color: rgba($color-primary, 0.1);
        border-radius: $radius-full;
        align-self: flex-start;
    }
    
    &:hover,
    &:focus-within {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba($color-dark, 0.15);
        
        .project-card__image {
            transform: scale(1.1);
        }
        
        .project-card__image-wrapper::after {
            opacity: 1;
        }
        
        .project-card__title {
            color: $color-primary;
        }
        
        .project-card__tech {
            background-color: rgba($color-primary, 0.2);
        }
    }
    
    &:focus-within {
        outline: 3px solid $color-primary;
        outline-offset: 2px;
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@media (prefers-reduced-motion: reduce) {
    .projects {
        &__title,
        &__action {
            animation: none;
        }
    }
    
    .project-card {
        animation: none;
        
        &:hover,
        &:focus-within {
            transform: none;
            
            .project-card__image {
                transform: none;
            }
        }
    }
}